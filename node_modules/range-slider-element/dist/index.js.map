{"version":3,"sources":["range-slider-element.js","index.js"],"names":["RangeSliderElement","UPDATE_EVENTS","REFLECTED_ATTRIBUTES","ARIA_ATTRIBUTES","value","min","max","TEMPLATE","_startHandler","e","focus","classList","add","setPointerCapture","pointerId","addEventListener","_moveHandler","_reflectValue","_endHandler","remove","releasePointerCapture","removeEventListener","dispatchEvent","Event","bubbles","_keyCodeHandler","code","up","includes","down","preventDefault","stepUp","stepDown","isRTL","Boolean","_isRTL","Number","oldValue","fullWidth","target","offsetWidth","percent","Math","offsetX","computedValue","newValue","_constrainValue","_ignoreChange","getAttribute","_defaultValue","HTMLElement","firstChild","innerHTML","_update","setAttribute","setAriaAttribute","name","step","valuePrecision","getPrescision","saveValue","nearestValue","round","toFixed","toString","percentComplete","style","setProperty","amount","String","_computedValue","disabled","precision","afterDecimal","split","length","element","attributeName","ELEMENT_NAME","window","customElements","get","define"],"mappings":"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","file":"index.js","sourceRoot":"..","sourcesContent":["// import * as style from './styles.css';\n\nconst UPDATE_EVENTS = ['input', 'change'];\nconst REFLECTED_ATTRIBUTES = ['min', 'max', 'step', 'value', 'disabled', 'value-precision'];\n\nconst ARIA_ATTRIBUTES = {\n  value: 'valuenow',\n  min: 'valuemin',\n  max: 'valuemax',\n};\n\nconst TEMPLATE = `\n  <div class=\"thumb-wrapper\">\n    <div class=\"thumb\"></div>\n  </div>\n`;\n\nclass RangeSliderElement extends HTMLElement {\n  constructor() {\n    super();\n    this._ignoreChange = false;\n    this._isRTL = this.getAttribute('dir') === 'rtl';\n    this._defaultValue = this.value;\n  }\n\n  static get observedAttributes() {\n    return REFLECTED_ATTRIBUTES;\n  }\n\n  get _computedValue() {\n    const min = Number(this.min);\n    const max = Number(this.max);\n    return String(max < min ? min : min + (max - min) / 2);\n  }\n\n  get min() { return this.getAttribute('min') || '0'; }\n  get max() { return this.getAttribute('max') || '100'; }\n  get step() { return this.getAttribute('step') || '1'; }\n  get value() { return this.getAttribute('value') || this._computedValue; }\n  get disabled() { return this.getAttribute('disabled') || false }\n  get valuePrecision() { return this.getAttribute('value-precision') || ''; }\n  get defaultValue() { return this._defaultValue; }\n\n  set min(min) { this.setAttribute('min', min); }\n  set max(max) { this.setAttribute('max', max); }\n  set step(step) { this.setAttribute('step', step); }\n  set value(value) { this.setAttribute('value', value); }\n  set disabled(disabled) { this.setAttribute('disabled', disabled); }\n  set valuePrecision(precision) { this.setAttribute('value-precision', precision); }\n  set defaultValue(value) { this._defaultValue = value; }\n\n  connectedCallback() {\n    if (!this.firstChild) {\n      this.innerHTML = TEMPLATE;\n    }\n\n    this.addEventListener('pointerdown', this._startHandler, false);\n    this.addEventListener('pointerup', this._endHandler, false);\n    this.addEventListener('keydown', this._keyCodeHandler, false);\n    this._update();\n\n    // Aria attributes\n    this.setAttribute('tabindex', '0');\n    this.setAttribute('role', 'slider');\n    setAriaAttribute(this, 'value', this.value);\n    setAriaAttribute(this, 'min', this.min);\n    setAriaAttribute(this, 'max', this.max);\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener('pointerdown', this._startHandler, false);\n    this.removeEventListener('pointerup', this._endHandler, false);\n    this.removeEventListener('keydown', this._keyCodeHandler, false);\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue === newValue || this._ignoreChange) return;\n    this._update();\n    setAriaAttribute(this, name, newValue);\n  }\n\n  _startHandler = e => {\n    this.focus();\n    this.classList.add('touch-active');\n\n    // Click and drag\n    this.setPointerCapture(e.pointerId);\n    this.addEventListener('pointermove', this._moveHandler, false);\n\n    // Click jump\n    this._reflectValue(e);\n  }\n\n  _moveHandler = e => {\n    this._reflectValue(e);\n  }\n\n  _endHandler = e => {\n    this.classList.remove('touch-active');\n    this.releasePointerCapture(e.pointerId);\n    this.removeEventListener('pointermove', this._moveHandler, false);\n\n    // TODO: check if value changed\n    this.dispatchEvent(new Event('change', { bubbles: true }));\n  }\n\n  _keyCodeHandler = e => {\n    const code = e.code;\n    const up = ['ArrowUp', 'ArrowRight'].includes(code);\n    const down = ['ArrowDown', 'ArrowLeft'].includes(code);\n\n    if (up) {\n      e.preventDefault();\n      this.stepUp();\n    }\n    else if (down) {\n      e.preventDefault();\n      this.stepDown();\n    }\n  }\n\n  _reflectValue = e => {\n    const isRTL = Boolean(this._isRTL);\n    const min = Number(this.min);\n    const max = Number(this.max);\n    const oldValue = this.value;\n    const fullWidth = e.target.offsetWidth;\n    const offsetX = Math.min(Math.max(e.offsetX, 0), fullWidth);\n    const percent = offsetX / fullWidth;\n    const percentComplete = isRTL ? 1 - percent : percent;\n\n    // Fit the percentage complete between the range [min,max]\n    // by remapping from [0, 1] to [min, min+(max-min)].\n    const computedValue = min + percentComplete * (max - min);\n\n    // Constrain value\n    const newValue = this._constrainValue(computedValue);\n\n    if (oldValue !== newValue) {\n      this.value = newValue;\n      this.dispatchEvent(new Event('input', { bubbles: true }));\n    }\n  }\n\n  _constrainValue(value) {\n    const min = Number(this.min);\n    const max = Number(this.max);\n    const step = Number(this.step);\n    const valuePrecision = Number(this.valuePrecision) || getPrescision(this.step) || 0;\n\n    // min, max constrain\n    const saveValue = Math.min(Math.max(value, min), max);\n\n    // Rounding in steps\n    const nearestValue = Math.round(saveValue / step) * step;\n\n    // Value precision\n    const newValue = valuePrecision ? nearestValue.toFixed(valuePrecision) : Math.round(nearestValue).toString();\n\n    return newValue;\n  }\n\n  _update() {\n    const isRTL = Boolean(this._isRTL);\n    const min = Number(this.min);\n    const max = Number(this.max);\n    const value = Number(this.value);\n    const percent = (100 * (value - min)) / (max - min);\n    const percentComplete = isRTL ? 100 - percent : percent;\n    this.style.setProperty('--value-percent', percentComplete + '%');\n  }\n\n  stepUp(amount = this.step) {\n    const oldValue = Number(this.value);\n    const newValue = this._constrainValue(oldValue + Number(amount));\n    if (oldValue !== newValue) {\n      this.value = newValue;\n      this.dispatchEvent(new Event('input', { bubbles: true }));\n      this.dispatchEvent(new Event('change', { bubbles: true }));\n    }\n  }\n\n  stepDown(amount = this.step) {\n    const oldValue = Number(this.value);\n    const newValue = this._constrainValue(oldValue - Number(amount));\n    if (oldValue !== newValue) {\n      this.value = newValue;\n      this.dispatchEvent(new Event('input', { bubbles: true }));\n      this.dispatchEvent(new Event('change', { bubbles: true }));\n    }\n  }\n}\n\nfunction getPrescision(value = '') {\n  const afterDecimal = value.split('.')[1];\n  return afterDecimal ? afterDecimal.length : 0;\n}\n\nfunction setAriaAttribute(element, name, value) {\n  const attributeName = ARIA_ATTRIBUTES[name];\n  if (!attributeName) return;\n  element.setAttribute(`aria-${attributeName}`, value);\n}\n\nexport default RangeSliderElement;\n","import RangeSliderElement from './range-slider-element';\nexport { RangeSliderElement as default }\n\nconst ELEMENT_NAME = 'range-slider';\n\nif (!window.customElements.get(ELEMENT_NAME)) {\n  window.RangeSliderElement = RangeSliderElement;\n  window.customElements.define(ELEMENT_NAME, RangeSliderElement);\n}\n"]}